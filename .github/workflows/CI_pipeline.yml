name: Java CI with Maven # name on the GHA UI
 
on: # when to trigger the workflow
  push:
    branches: [ "master" ]


jobs: #each job run independtly
  security-scan:
    runs-on: self-hosted  # AWS hosted self runners

    steps:
        # Step 1: Get the source code
        - name: Checkout code 
          uses: actions/checkout@v4

        # Step 2: Install Java 25 (Temurin = free OpenJDK build)
        - name: Set up Java
          uses: actions/setup-java@v4
          with:
            distribution: 'temurin'
            java-version: '25'

        - name: Run Gitleaks Secret Scan
          uses: gitleaks/gitleaks-action@v2
          with:
           args: detect --source . --no-git -v
           continue-on-error: false